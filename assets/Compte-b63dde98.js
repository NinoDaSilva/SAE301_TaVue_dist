import{_ as H,o as r,c as u,l as N,r as h,f as G,u as P,m as Z,p as F,h as i,a as e,t as R,b as n,q as C,w as y,v as I,s as g,x as _,i as c,y as U,F as S,g as A,z as K,A as T,e as W}from"./index-3ecb658b.js";import{C as j}from"./pocketbase.es-2eb1282e.js";const E="/img/Img-connexion.webp",O={},J={width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Q=N('<path d="M22.295 2.10499C15.9004 4.32333 10.3857 8.53382 6.56093 14.118C2.73616 19.7022 0.802929 26.3657 1.04518 33.1298C1.28744 39.8939 3.69241 46.4021 7.90686 51.6983C12.1213 56.9946 17.9231 60.7998 24.46 62.555C29.7596 63.9225 35.312 63.9825 40.64 62.73C45.4666 61.6458 49.9289 59.3268 53.59 56C57.4004 52.4317 60.1662 47.8924 61.59 42.87C63.137 37.4082 63.4124 31.6647 62.395 26.08H32.635V38.425H49.87C49.5255 40.3939 48.7874 42.2731 47.6997 43.9502C46.6121 45.6272 45.1973 47.0675 43.54 48.185C41.4357 49.5777 39.0631 50.5144 36.575 50.935C34.0797 51.3991 31.5202 51.3991 29.025 50.935C26.4957 50.4127 24.1032 49.3688 22 47.87C18.6207 45.4779 16.0834 42.0796 14.75 38.16C13.3944 34.1669 13.3944 29.8381 14.75 25.845C15.6991 23.0461 17.2681 20.4977 19.34 18.39C21.7109 15.9337 24.7126 14.178 28.0158 13.3154C31.3189 12.4528 34.7958 12.5166 38.065 13.5C40.619 14.2836 42.9544 15.6534 44.885 17.5C46.8283 15.5667 48.7683 13.6283 50.705 11.685C51.705 10.64 52.795 9.64499 53.78 8.57499C50.8326 5.83258 47.3733 3.69851 43.6 2.29499C36.7285 -0.20006 29.2099 -0.267112 22.295 2.10499Z" fill="white"></path><path d="M22.2949 2.10498C29.2092 -0.268736 36.7278 -0.203449 43.5999 2.28998C47.3738 3.70303 50.8316 5.84738 53.7749 8.59998C52.7749 9.66998 51.7199 10.67 50.6999 11.71C48.7599 13.6466 46.8215 15.5766 44.8849 17.5C42.9543 15.6534 40.6189 14.2836 38.0649 13.5C34.7968 12.5132 31.32 12.4456 28.016 13.3047C24.712 14.1638 21.7084 15.9163 19.3349 18.37C17.2631 20.4777 15.694 23.0261 14.7449 25.825L4.37988 17.8C8.08992 10.4428 14.5136 4.8151 22.2949 2.10498Z" fill="#E33629"></path><path d="M1.63 25.75C2.18669 22.9889 3.11162 20.315 4.38 17.8L14.745 25.845C13.3894 29.8381 13.3894 34.167 14.745 38.16C11.2917 40.8267 7.83666 43.5067 4.38 46.2001C1.20575 39.8816 0.237659 32.6826 1.63 25.75Z" fill="#F8BD00"></path><path d="M32.635 26.075H62.395C63.4125 31.6597 63.1371 37.4032 61.59 42.865C60.1662 47.8873 57.4004 52.4267 53.59 55.9949C50.245 53.3849 46.885 50.795 43.54 48.185C45.1984 47.0663 46.6139 45.6244 47.7016 43.9456C48.7893 42.2668 49.5268 40.3857 49.87 38.415H32.635C32.63 34.305 32.635 30.19 32.635 26.075Z" fill="#587DBD"></path><path d="M4.375 46.2C7.83167 43.5334 11.2867 40.8534 14.74 38.16C16.076 42.081 18.617 45.4795 22 47.87C24.1098 49.3619 26.5075 50.3973 29.04 50.91C31.5353 51.3741 34.0947 51.3741 36.59 50.91C39.0781 50.4895 41.4507 49.5527 43.555 48.16C46.9 50.77 50.26 53.36 53.605 55.97C49.9445 59.2987 45.4821 61.6194 40.655 62.705C35.327 63.9576 29.7746 63.8975 24.475 62.53C20.2835 61.4109 16.3684 59.438 12.975 56.735C9.38364 53.8831 6.45017 50.2896 4.375 46.2Z" fill="#319F43"></path>',5),X=[Q];function Y(M,f){return r(),u("svg",J,X)}const B=H(O,[["render",Y]]),ee={key:0,class:"mt-10 mb-10 grid text-center"},te=["src"],se=e("h2",{class:"text-xl mb-2"},"Heureux de vous revoir !",-1),oe={class:"mr-2 ml-2 text-lg"},ne={key:1,class:"text-center max-lg:mb-20 lg:dispo"},le={class:"mt-40"},ae=e("h1",{class:"mb-8 text-3xl font-Khand font-bold title-shadow"},"Connexion",-1),ie={class:"flex gap-3 justify-center mt-7 mb-5"},re={class:"text-center"},ue=e("p",null,"Vous n'avez pas de compte ?",-1),de=e("div",null,[e("img",{class:"min-h-[700px] h-full hidden lg:block",src:E,alt:"Image d'illustration lunettes"})],-1),ce={key:2,class:"text-center max-lg:mb-20 lg:dispo"},me={class:"mt-40"},pe=e("h1",{class:"mb-8 text-3xl font-Khand font-bold title-shadow"},"Inscription",-1),ve=e("input",{class:"block mx-auto input-connect",type:"text",required:"",id:"nom",placeholder:"Nom"},null,-1),he=e("input",{class:"block mx-auto input-connect",type:"text",required:"",id:"prenom",placeholder:"Prénom"},null,-1),Ce=e("input",{class:"block mx-auto input-connect",type:"email",required:"",id:"email",placeholder:"Mail"},null,-1),_e=e("input",{class:"block mx-auto input-connect",type:"password",required:"",id:"passwd",placeholder:"Mot de passe"},null,-1),fe={class:"flex gap-3 justify-center mt-7 mb-5"},xe={type:"submit"},ge={class:"text-center"},be=e("p",null,"Vous n'avez pas de compte ?",-1),we=e("div",null,[e("img",{class:"min-h-[700px] h-full hidden lg:block",src:E,alt:"Image d'illustration lunettes"})],-1),ye={key:3,class:"mt-20"},ke=e("h3",{class:"ml-20 mb-5 text-2xl font-Khand font-medium"},"Vos lunettes",-1),Ve={key:0},Ie=e("p",null,"Vous n'avez pas encore personnalisez vos propres lunettes.",-1),Ee={__name:"Compte",setup(M){var f="";f="https://tavue.nino-da-silva.fr/";const o=new j(f);let d=h(!1),m=h(""),p=h(""),l=h(null),x=h(null);var a=h(!1);const b=()=>{o.authStore.isValid&&(l.value=o.authStore.model,d.value=!0,x.value=f+"/api/files"+l.value.collectionId+"/"+l.value.id+"/"+l.value.avatar+"?thumb=100x100")};G(async()=>{b()});const $=async()=>{try{const v=await o.collection("users").authWithPassword(m.value,p.value);b()}catch{alert("Erreur de connexion : mauvais login et/ou mot de passe"),m.value="",p.value=""}},L=()=>{o.authStore.clear(),d.value=!1,x.value=null,window.location.href="/"},k=async()=>{await o.collection("users").authWithOAuth2({provider:"google"}),o.authStore.isValid&&(d.value=!0,l.value=o.authStore.model)},V=async()=>{await o.collection("users").authWithOAuth2({provider:"github"}),o.authStore.isValid&&(d.value=!0,l.value=o.authStore.model)},q=async()=>{try{l={email:document.getElementById("email").value,password:document.getElementById("passwd").value,passwordConfirm:document.getElementById("passwd").value,username:document.getElementById("nom").value,name:document.getElementById("prenom").value};const v=await o.collection("users").create(l);await o.collection("users").requestVerification(document.getElementById("email").value),alert("Inscription réussie ! Un mail de vérification vous a été envoyé"),a.value=!1,b(),d.value=!0}catch{alert("Erreur lors de l'inscription. Vérifiez que votre adresse mail et votre mot de passe soient valides")}},w=document.getElementById("avatar");return w&&(x.value==null?w.addClassName("hidden"):w.removeClassName("hidden")),P({title:"Compte - TaVue"}),(v,t)=>{const z=Z("RouterLink"),D=F("key");return r(),u(S,null,[i(d)?(r(),u("span",ee,[e("img",{id:"avatar",src:i(x),class:"hidden mx-auto mb-4",alt:"avatar"},null,8,te),se,e("span",oe,R(i(l).username),1),e("button",{class:"mx-auto w-[200px] h-12 mt-5",type:"button",onClick:t[0]||(t[0]=s=>L())},[n(c,{class:"",text:"Déconnexion"})])])):C("",!0),!i(d)&&!i(a)?(r(),u("div",ne,[e("div",le,[ae,e("form",null,[y(e("input",{class:"block mx-auto input-connect",type:"email",required:"",id:"email",placeholder:"Mail","onUpdate:modelValue":t[1]||(t[1]=s=>g(m)?m.value=s:m=s)},null,512),[[I,i(m)]]),y(e("input",{class:"block mx-auto input-connect",type:"password",required:"",id:"passwd",placeholder:"Mot de passe","onUpdate:modelValue":t[2]||(t[2]=s=>g(p)?p.value=s:p=s)},null,512),[[I,i(p)]]),e("div",ie,[e("button",{type:"submit",onClick:t[3]||(t[3]=s=>$())},[n(c,{text:"Se connecter"})]),e("button",{onClick:t[4]||(t[4]=s=>k())},[n(c,{text:"Google"},{icon:_(()=>[n(B,{class:"w-6 h-6 mr-3"})]),_:1})]),e("button",{onClick:t[5]||(t[5]=s=>V())},[n(c,{text:"GitHub"},{icon:_(()=>[]),_:1})])])]),e("div",re,[ue,e("button",{class:"font-bold",onClick:t[6]||(t[6]=s=>g(a)?a.value=!0:a=!0)},"S'inscrire")])]),de])):C("",!0),i(a)?(r(),u("div",ce,[e("div",me,[pe,e("form",{onSubmit:t[9]||(t[9]=U(s=>q(),["prevent"]))},[ve,he,Ce,_e,e("div",fe,[e("button",xe,[n(c,{text:"S'inscrire"})]),e("button",{onClick:t[7]||(t[7]=s=>k())},[n(c,{text:"Google"},{icon:_(()=>[n(B,{class:"w-6 h-6 mr-3"})]),_:1})]),e("button",{onClick:t[8]||(t[8]=s=>V())},[n(c,{text:"GitHub"},{icon:_(()=>[]),_:1})])])],32),e("div",ge,[be,e("button",{class:"font-bold",onClick:t[10]||(t[10]=s=>g(a)?a.value=!1:a=!1)},"Se connecter")])]),we])):C("",!0),i(d)?(r(),u("div",ye,[ke,(r(!0),u(S,null,A(v.lunettesList,s=>y((r(),u("div",K(T({lunette:s})),[v.lunettesList.lenght<0?(r(),u("div",Ve,[Ie,n(z,{to:"/Personalisation"},{default:_(()=>[W("Lancez vous dès maintenant !")]),_:1})])):C("",!0)],16)),[[D,s.id]])),256))])):C("",!0)],64)}}};export{Ee as default};
